{% extends 'contactsapp/base.html' %}


{% block content %}
    {% if message == 'passwords_dont_match' %}
    <div style="color:red">The passwords entered do not match!</div>
    {% elif message == 'user_already_exists' %}
    <div style="color:red">A user with that username already exists</div>
    {% endif %}
    <h1>Register</h1>
    <form action="" method="post">
        {% csrf_token %}
        <input type="text" name="username" placeholder="username" required/>
        <input type="email" id="input_email" name="email" placeholder="email" required/>
        <input type="password" id="input_password" name="password" placeholder="password" required/>
        <input type="password" id="input_retype_password" name="retype_password" placeholder="retype password" required/>
        <button id="btn_register" type="submit">Register</button>
    </form>
    <div><a href="{% url 'contactsapp:login' %}">login</a></div>

    <script>
        let input_email = document.querySelector('#input_email')
        let input_password = document.querySelector('#input_password')
        let input_retype_password = document.querySelector('#input_retype_password')
        let btn_register = document.querySelector('#btn_register')
        btn_register.addEventListener('click', function(event) {
            if (!input_email.value.match(/^.+@.+\..+$/)) {
                event.preventDefault() // prevent the form from being submitted
                alert('That email address is in a bad format')
            }
            if (input_password.value != input_retype_password.value) {
                event.preventDefault() // prevent the form from being submitted
                alert('The passwords don\'t match! :(')
            }
        })

    </script>
{% endblock %}